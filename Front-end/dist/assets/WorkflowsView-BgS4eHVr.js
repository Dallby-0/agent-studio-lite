import{r as f,h as $,i as D,o as E,w as a,b as i,d as e,f as d,e as n,k as C,x as L,t as y,E as _,u as M}from"./index-g6aQcVIG.js";import{L as P}from"./Layout-kDhWiEU5.js";import{u as j}from"./userStore-DdKhfmJw.js";import{g as q,d as H}from"./workflow-Dm20tcuL.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"workflows-view"},F={class:"view-header"},G={class:"header-actions"},J={class:"table-pagination"},K={__name:"WorkflowsView",setup(O){const g=M(),z=j(),r=f([]),u=f(1),w=f(10),p=f(0),k=[{id:1,name:"示例工作流1",description:"这是一个示例工作流，包含开始、大模型调用和结束节点",version:"1.0.0",status:1,createdAt:"2023-10-01 10:00:00",updatedAt:"2023-10-01 10:00:00"},{id:2,name:"客户服务工作流",description:"用于自动处理客户服务请求的工作流",version:"1.0.0",status:1,createdAt:"2023-10-02 14:30:00",updatedAt:"2023-10-02 14:30:00"}],c=()=>{q().then(o=>{r.value=o.data||o,p.value=r.value.length}).catch(o=>{_.error("加载工作流失败"),console.error("加载工作流失败:",o),r.value=k,p.value=k.length})},W=()=>{g.push("/workflows/designer")},h=o=>{g.push({path:"/workflows/designer",query:{id:o.id}})},x=o=>{H(o).then(()=>{_.success("工作流已删除"),c()}).catch(t=>{_.error("删除工作流失败"),console.error("删除工作流失败:",t),r.value=r.value.filter(m=>m.id!==o),p.value=r.value.length,_.success("工作流已删除")})},S=o=>{w.value=o,u.value=1,c()},A=o=>{u.value=o,c()};return $(()=>{c()}),(o,t)=>{const m=n("el-icon"),v=n("el-button"),s=n("el-table-column"),I=n("el-link"),V=n("el-tag"),B=n("el-table"),N=n("el-pagination"),U=n("el-card");return E(),D(P,{userInfo:C(z).userInfo},{default:a(()=>[i("div",T,[i("div",F,[t[3]||(t[3]=i("h1",null,"工作流管理",-1)),i("div",G,[e(v,{type:"primary",onClick:W},{default:a(()=>[e(m,null,{default:a(()=>[e(C(L))]),_:1}),t[2]||(t[2]=d(" 新建工作流 ",-1))]),_:1})])]),e(U,{class:"workflows-card"},{header:a(()=>[...t[4]||(t[4]=[i("div",{class:"card-header"},[i("span",null,"工作流列表")],-1)])]),default:a(()=>[e(B,{data:r.value,style:{width:"100%"}},{default:a(()=>[e(s,{prop:"id",label:"ID",width:"80"}),e(s,{prop:"name",label:"工作流名称","min-width":"200"},{default:a(l=>[e(I,{type:"primary",onClick:b=>h(l.row)},{default:a(()=>[d(y(l.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"description",label:"描述","min-width":"250","show-overflow-tooltip":""}),e(s,{prop:"version",label:"版本",width:"100"}),e(s,{prop:"status",label:"状态",width:"100"},{default:a(l=>[e(V,{type:l.row.status===1?"success":"warning"},{default:a(()=>[d(y(l.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"createdAt",label:"创建时间",width:"180"}),e(s,{prop:"updatedAt",label:"更新时间",width:"180"}),e(s,{label:"操作",width:"150",fixed:"right"},{default:a(l=>[e(v,{type:"primary",size:"small",onClick:b=>h(l.row)},{default:a(()=>[...t[5]||(t[5]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(v,{type:"danger",size:"small",onClick:b=>x(l.row.id)},{default:a(()=>[...t[6]||(t[6]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),i("div",J,[e(N,{"current-page":u.value,"onUpdate:currentPage":t[0]||(t[0]=l=>u.value=l),"page-size":w.value,"onUpdate:pageSize":t[1]||(t[1]=l=>w.value=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:p.value,onSizeChange:S,onCurrentChange:A},null,8,["current-page","page-size","total"])])]),_:1})])]),_:1},8,["userInfo"])}}},te=R(K,[["__scopeId","data-v-1d62c7f4"]]);export{te as default};
