import{g as s}from"./index-DPyoWTO0.js";const t=s.create({timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));t.interceptors.response.use(e=>e.data,e=>{if(console.error("响应错误:",e),e.response)switch(e.response.status){case 401:console.error("未授权，请重新登录");break;case 403:console.error("拒绝访问");break;case 404:console.error("请求的资源不存在");break;case 500:console.error("服务器错误");break;default:console.error(`请求失败: ${e.response.data.message||"未知错误"}`)}else e.request&&console.error("网络错误，请检查网络连接");return Promise.reject(e)});const a={async getAgents(e={}){try{const r=await t.get("/api/agents",{params:e});return console.log("获取智能体列表成功:",r),r}catch(r){throw console.error("获取智能体列表失败:",r),r}},async getAgentById(e){try{const r=await t.get(`/api/agents/${e}`);return console.log(`获取智能体 ${e} 详情成功:`,r),r}catch(r){throw console.error(`获取智能体 ${e} 详情失败:`,r),r}},async createAgent(e){try{const r=await t.post("/api/agents",e);return console.log("创建智能体成功:",r),r}catch(r){throw console.error("创建智能体失败:",r),r}},async updateAgent(e,r){try{const o=await t.put(`/api/agents/${e}`,r);return console.log(`更新智能体 ${e} 成功:`,o),o}catch(o){throw console.error(`更新智能体 ${e} 失败:`,o),o}},async deleteAgent(e){try{const r=await t.delete(`/api/agents/${e}`);return console.log(`删除智能体 ${e} 成功:`,r),r}catch(r){throw console.error(`删除智能体 ${e} 失败:`,r),r}},async getAgentKnowledge(e){try{const r=await t.get(`/api/agents/${e}/knowledge`);return console.log(`获取智能体 ${e} 知识库成功:`,r),r}catch(r){throw console.error(`获取智能体 ${e} 知识库失败:`,r),r}},async addAgentKnowledge(e,r){try{const o=await t.post("/api/agents/knowledge",{agentId:e,knowledgeBaseId:r});return console.log(`为智能体 ${e} 绑定知识库 ${r} 成功:`,o),o}catch(o){throw console.error(`为智能体 ${e} 绑定知识库 ${r} 失败:`,o),o}}};export{a,t as b};
