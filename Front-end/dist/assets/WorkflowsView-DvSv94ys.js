import{r as f,h as $,i as D,o as E,w as a,b as r,d as e,f as u,e as n,k as C,x as L,t as y,E as w,u as M}from"./index-DPyoWTO0.js";import{L as P}from"./Layout-DHl0ER0W.js";import{u as j}from"./userStore-G1T_YT5K.js";import{g as q,d as H}from"./workflow-BGyh7tre.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"workflows-view"},F={class:"view-header"},G={class:"header-actions"},J={class:"table-pagination"},K={__name:"WorkflowsView",setup(O){const g=M(),z=j(),i=f([]),d=f(1),p=f(10),c=f(0),k=[{id:1,name:"示例工作流1",description:"这是一个示例工作流，包含开始、大模型调用和结束节点",version:"1.0.0",status:1,createdAt:"2023-10-01 10:00:00",updatedAt:"2023-10-01 10:00:00"},{id:2,name:"客户服务工作流",description:"用于自动处理客户服务请求的工作流",version:"1.0.0",status:1,createdAt:"2023-10-02 14:30:00",updatedAt:"2023-10-02 14:30:00"}],_=()=>{q({page:d.value,pageSize:p.value}).then(o=>{i.value=o.data,c.value=o.total}).catch(o=>{w.error("加载工作流失败"),console.error("加载工作流失败:",o),i.value=k,c.value=k.length})},W=()=>{g.push("/workflows/designer")},h=o=>{g.push({path:"/workflows/designer",query:{id:o.id}})},x=o=>{H(o).then(()=>{w.success("工作流已删除"),_()}).catch(t=>{w.error("删除工作流失败"),console.error("删除工作流失败:",t),i.value=i.value.filter(m=>m.id!==o),c.value=i.value.length,w.success("工作流已删除")})},S=o=>{p.value=o,d.value=1,_()},A=o=>{d.value=o,_()};return $(()=>{_()}),(o,t)=>{const m=n("el-icon"),v=n("el-button"),s=n("el-table-column"),I=n("el-link"),V=n("el-tag"),B=n("el-table"),N=n("el-pagination"),U=n("el-card");return E(),D(P,{userInfo:C(z).userInfo},{default:a(()=>[r("div",T,[r("div",F,[t[3]||(t[3]=r("h1",null,"工作流管理",-1)),r("div",G,[e(v,{type:"primary",onClick:W},{default:a(()=>[e(m,null,{default:a(()=>[e(C(L))]),_:1}),t[2]||(t[2]=u(" 新建工作流 ",-1))]),_:1})])]),e(U,{class:"workflows-card"},{header:a(()=>[...t[4]||(t[4]=[r("div",{class:"card-header"},[r("span",null,"工作流列表")],-1)])]),default:a(()=>[e(B,{data:i.value,style:{width:"100%"}},{default:a(()=>[e(s,{prop:"id",label:"ID",width:"80"}),e(s,{prop:"name",label:"工作流名称","min-width":"200"},{default:a(l=>[e(I,{type:"primary",onClick:b=>h(l.row)},{default:a(()=>[u(y(l.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"description",label:"描述","min-width":"250","show-overflow-tooltip":""}),e(s,{prop:"version",label:"版本",width:"100"}),e(s,{prop:"status",label:"状态",width:"100"},{default:a(l=>[e(V,{type:l.row.status===1?"success":"warning"},{default:a(()=>[u(y(l.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"createdAt",label:"创建时间",width:"180"}),e(s,{prop:"updatedAt",label:"更新时间",width:"180"}),e(s,{label:"操作",width:"150",fixed:"right"},{default:a(l=>[e(v,{type:"primary",size:"small",onClick:b=>h(l.row)},{default:a(()=>[...t[5]||(t[5]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(v,{type:"danger",size:"small",onClick:b=>x(l.row.id)},{default:a(()=>[...t[6]||(t[6]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),r("div",J,[e(N,{"current-page":d.value,"onUpdate:currentPage":t[0]||(t[0]=l=>d.value=l),"page-size":p.value,"onUpdate:pageSize":t[1]||(t[1]=l=>p.value=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:c.value,onSizeChange:S,onCurrentChange:A},null,8,["current-page","page-size","total"])])]),_:1})])]),_:1},8,["userInfo"])}}},te=R(K,[["__scopeId","data-v-e0959780"]]);export{te as default};
