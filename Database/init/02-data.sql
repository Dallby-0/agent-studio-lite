-- 从agent_workflow.sql备份的数据库数据
SET NAMES utf8mb4;
USE agent_workflow;

-- 插入管理员数据
INSERT INTO `admin` (`id`, `username`, `password`, `nickname`, `email`, `phone`, `avatar`, `role_id`, `status`, `last_login_time`, `created_at`, `updated_at`, `is_deleted`) VALUES
(3, 'admin', '$2a$10$MeiwruTQYcKArS7FiNBlHOvSZpjGwk.USJSYbG8dVvc7..zljjPFm', '管理员', 'admin@example.com', '13800138000', NULL, 1, 1, '2025-11-18 12:36:20', '2025-11-21 08:12:13', '2025-11-21 08:12:13', 0);

-- 插入智能体数据
INSERT INTO `agent` (`id`, `name`, `description`, `type`, `config_json`, `status`, `created_by`, `created_at`, `updated_at`, `is_deleted`) VALUES
(8, '更新的智能体名称', '这是更新后的描述', 'default', NULL, 1, 14, '2025-11-21 19:41:50', '2025-11-21 19:53:12', 0),
(9, '智能体01', '', 'knowledge', NULL, 1, 14, '2025-11-21 20:38:00', '2025-11-22 10:52:22', 0),
(10, '更新测试', '', 'general', NULL, 1, 14, '2025-11-22 10:51:18', '2025-11-22 10:51:56', 0),
(11, '删除测试', '123', 'general', NULL, 1, 14, '2025-11-22 10:52:35', '2025-11-22 02:52:39', 1),
(12, '123', '', 'general', NULL, 1, -3, '2025-11-22 10:53:20', '2025-11-22 10:53:20', 0),
(13, 'user1创建内容', '', 'creative', NULL, 1, 21, '2025-11-22 10:58:00', '2025-11-22 10:58:00', 0),
(14, '删除02', '', 'general', NULL, 1, 14, '2025-11-22 11:03:42', '2025-11-22 03:04:09', 1);

-- 插入聊天消息数据
INSERT INTO `chat_message` (`id`, `session_id`, `sender_type`, `content`, `content_type`, `created_at`, `is_deleted`) VALUES
(1, 1, 0, '你好，我想了解一下你们的服务', 'text', '2025-11-21 08:12:13', 0),
(2, 1, 1, '您好！我是客服智能助手，很高兴为您服务。请问有什么可以帮助您的吗？', 'text', '2025-11-21 08:12:13', 0),
(3, 2, 0, '能帮我看一下这段代码有什么问题吗？', 'text', '2025-11-21 08:12:13', 0),
(4, 2, 1, '当然可以，请您提供代码，我会帮您检查。', 'text', '2025-11-21 08:12:13', 0),
(5, 3, 0, '我想学习微积分，能给我一些建议吗？', 'text', '2025-11-21 08:12:13', 0),
(6, 3, 1, '您好！微积分是一门很重要的数学学科。我建议您从极限和导数的基本概念开始学习...', 'text', '2025-11-21 08:12:13', 0);

-- 插入聊天会话数据
INSERT INTO `chat_session` (`id`, `user_id`, `title`, `status`, `created_at`, `updated_at`, `is_deleted`) VALUES
(1, 14, '与客服智能体的对话', 1, '2025-11-21 08:12:13', '2025-11-21 08:12:13', 0),
(2, 14, '与开发助手的对话', 1, '2025-11-21 08:12:13', '2025-11-21 08:12:13', 0),
(3, 14, '与学习导师的对话', 1, '2025-11-21 08:12:13', '2025-11-21 08:12:13', 0);

-- 插入权限数据
INSERT INTO `permission` (`id`, `name`, `code`, `description`, `created_at`, `updated_at`) VALUES
(1, '用户管理', 'user:manage', '管理用户信息', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(2, '智能体管理', 'agent:manage', '管理智能体', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(3, '知识库管理', 'knowledge:manage', '管理知识库', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(4, '插件管理', 'plugin:manage', '管理插件', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(5, '聊天管理', 'chat:manage', '管理聊天记录', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(6, '系统配置', 'system:config', '配置系统参数', '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(7, '数据迁移', 'data:migrate', '执行数据迁移操作', '2025-11-21 08:12:13', '2025-11-21 08:12:13');

-- 插入角色数据
INSERT INTO `role` (`id`, `name`, `description`, `status`, `created_at`, `updated_at`) VALUES
(1, '管理员', '系统管理员角色，拥有最高权限', 1, '2025-11-21 08:12:13', '2025-11-21 08:12:13'),
(2, '普通用户', '普通用户角色', 1, '2025-11-21 08:12:13', '2025-11-21 08:12:13');

-- 插入角色权限关联数据
INSERT INTO `role_permission` (`role_id`, `permission_id`) VALUES
(1, 1),
(1, 2),
(1, 3),
(1, 4),
(1, 5),
(1, 6),
(1, 7);

-- 插入用户数据
INSERT INTO `user` (`id`, `username`, `password`, `email`, `phone`, `nickname`, `avatar`, `gender`, `birthdate`, `status`, `created_at`, `updated_at`, `last_login_at`, `is_deleted`, `role_id`) VALUES
(14, 'user', '$2a$10$IJ1qcZw75SeXofL/yfHd1uTtx/2y7G.Y9L.gnUQlq7sBRg2fhKVfm', 'tttt@example.com', '13979999979', '李四', NULL, 1, '1997-03-01', 1, '2025-11-21 08:12:13', '2025-11-21 15:59:34', '2025-11-18 12:35:59', 0, 2),
(15, 'testuser123', '$2a$10$JQUrIpWGOlXEJ9HmBw4VxeESolCGvpi5zy4vPF5WW/fwOLMpEg2aW', 'test@example.com', '13800138000', '测试用户', NULL, NULL, '1414-01-01', 1, '2025-11-21 18:11:32', '2025-11-22 03:01:56', NULL, 0, 2),
(21, 'user1', '$2a$10$jsroc7l1F563vDUQxDFBtuNeF/l73haVkSUdW42Pd7yGqd/4iH42y', 'lehthe@gmail.com', '12312312312', '王五', NULL, NULL, '1990-01-01', 1, '2025-11-22 10:56:00', '2025-11-22 03:02:31', NULL, 0, 2);

-- 插入演示用工作流示例
INSERT INTO `state_workflow_definition` (`name`, `description`, `version`, `status`, `created_by`, `json_definition`) VALUES
('AutoPresentationLight', '一个简单的状态机工作流示例', '1.0.0', 1, 14, '{\"nodes\": [{\"name\": \"开始节点 1\", \"type\": \"start\", \"config\": {}, \"nodeKey\": \"start_1765709915436\", \"positionX\": 44.98304473304477, \"positionY\": 17.932900432900432}, {\"name\": \"张三淘汰\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${淘汰列表},\'张三\')\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765710633783\", \"positionX\": 57.86111111111106, \"positionY\": 160.62698412698413}, {\"name\": \"李四淘汰\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${淘汰列表},\'李四\')\", \"true\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765710641449\", \"positionX\": 341.76010101010127, \"positionY\": 160.98232323232324}, {\"name\": \"王五淘汰\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${淘汰列表},\'王五\')\", \"true\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765710644700\", \"positionX\": 618.8636363636364, \"positionY\": 173.84343434343452}, {\"name\": \"李四\", \"type\": \"llm_call\", \"config\": {\"outputVar\": \"李四发言\", \"useHistory\": true, \"userPrompt\": \"现在是你的${当前阶段}阶段，请进行符合阶段的行动。\\n目前已被淘汰的角色：【${淘汰列表}】\\n剩余轮次（为1代表当前是最后一轮）：【${剩余轮次}】\", \"systemPrompt\": \"你叫李四，正在参与【谁是间谍】游戏\\n# 【谁是间谍】游戏玩家核心指令（纯描述版）\\n\\n## 游戏规则（你必须遵守）\\n1.  **身份与词语**：你是【平民】或【间谍】中的一员。所有平民持有相同词语A，所有间谍持有相同词语B。A与B相关但不同。\\n2.  **信息差**：你**仅知道自己的词语**，不知道自己的身份，也不知道他人的词语和身份。\\n3.  **发言规则（铁律）**：\\n    - 每轮发言时，**你只能对自己的词语进行描述**。\\n    - **禁止**在描述中直接或间接地分析、指控、怀疑其他玩家（例如：不能说“我觉得X号玩家很奇怪”）。\\n    - **禁止**在描述中讨论游戏策略、身份推断或投票意向。\\n    - 你的描述应专注于词语本身的特征、属性、功能、联想等。\\n4.  **投票规则**：在投票阶段，你必须根据所有人的**描述内容**，投票给最可能是间谍的玩家，如果没有合适人选，可以输出跳过。\\n5.  **目标**：\\n    - 如果你是平民，目标是让其他平民通过描述认出彼此，并投票淘汰间谍。\\n    - 如果你是间谍，目标是让自己的描述听起来像平民，并误导投票。\\n\\n## 你的策略与推理逻辑\\n- **倾听与对比**：这是你最重要的任务。仔细比较每个人的描述与你自己的词语。高度一致的描述可能来自你的“同胞”（相同身份者）。\\n- **渐进描述**：每一轮，请从**新的、不同的角度**描述你的词语，提供更多信息，帮助你的“同胞”识别你。\\n- **身份推理**：如果你发现多数人的描述核心与你的词语不符，你可能是间谍。此时，你的描述应向多数人的描述靠拢。\\n- **信号传递**：作为平民，你可以使用一些公认的“平民腔调”（如描述得更具体、更情感化）来吸引同胞。作为间谍，你的描述应**模糊、中立**，能够兼容两种可能的词语。\\n\\n🤫 模糊描述进阶技巧（请仔细阅读并运用）\\n你“模糊”的目的是：让你的描述既能被平民阵营接受，又不暴露自己作为间谍的可能。请运用以下具体技巧：\\n\\n兼容性测试（核心心法）：\\n\\n在构思描述时，心里要同时思考平民词语A和间谍词语B两种可能性。你的描述要力求做到：如果别人听到你的描述后，无论他持有A还是B，都会觉得“嗯，这说得通”。例如，如果词语可能是“咖啡”或“茶”，不要说“用咖啡豆研磨的”（这直接指向咖啡），而要说“一种常见的提神饮品”。\\n\\n使用抽象与感官词汇：\\n\\n多描述感受、氛围、通用功能，而非具体细节。\\n\\n不要说：“它有四个轮子和一个方向盘。”（太具体，指向“汽车”）\\n\\n要说：“它能带你去远方，感受速度和自由。”（抽象，兼容“汽车”、“摩托车”甚至“自行车”）\\n\\n制造“合理歧义”：\\n\\n使用一些词语，使其在不同语境下有不同解读。\\n\\n例如，描述一个可能是“钢琴”或“小提琴”的物体时，可以说：“它的声音能充满整个殿堂。” （“殿堂”可以指音乐厅，也可以模糊处理）。\\n\\n控制信息量：\\n\\n不说全，只说一部分。第一轮给出一个非常宽泛的特征，后续轮次再慢慢补充关联性强的特征，观察他人反应。永远不要一次性给出决定性特征。\\n\\n模仿“平民口吻”：\\n\\n平民的描述可能会更具体、更有感情。作为间谍，你可以模仿这种口吻，但内容是模糊的。例如：“我对它有一种 nostalgic（怀旧）的感觉，小时候经常接触。”（情感具体，对象模糊）\\n\\n## 输出格式（必须严格遵守）\\n在发言阶段，你的整个输出内容只能是：\\n`【我的描述】：{这里填写你本轮对词语的描述，尽量简洁，为了赢得游戏，请模糊描述}`\\n在投票阶段，你的整个输出内容只能是:\\n`【投票】：{这里填写你想投票的对象昵称，如果没有明确投票意向，建议填写跳过}`\\n\\n请开始游戏。你的词语是：${李四身份}。这是你一切描述的基础。\\n\", \"saveToHistory\": true, \"enableChatOutput\": true}, \"nodeKey\": \"llm_call_1765711145271\", \"positionX\": 345.8459595959598, \"positionY\": 423.41414141414145}, {\"name\": \"王五\", \"type\": \"llm_call\", \"config\": {\"outputVar\": \"王五发言\", \"useHistory\": true, \"userPrompt\": \"现在是你的${当前阶段}阶段，请进行符合阶段的行动。\\n目前已被淘汰的角色：【${淘汰列表}】\\n剩余轮次（为1代表当前是最后一轮）：【${剩余轮次}】\", \"systemPrompt\": \"你叫王五，正在参与【谁是间谍】游戏\\n# 【谁是间谍】游戏玩家核心指令（纯描述版）\\n\\n## 游戏规则（你必须遵守）\\n1.  **身份与词语**：你是【平民】或【间谍】中的一员。所有平民持有相同词语A，所有间谍持有相同词语B。A与B相关但不同。\\n2.  **信息差**：你**仅知道自己的词语**，不知道自己的身份，也不知道他人的词语和身份。\\n3.  **发言规则（铁律）**：\\n    - 每轮发言时，**你只能对自己的词语进行描述**。\\n    - **禁止**在描述中直接或间接地分析、指控、怀疑其他玩家（例如：不能说“我觉得X号玩家很奇怪”）。\\n    - **禁止**在描述中讨论游戏策略、身份推断或投票意向。\\n    - 你的描述应专注于词语本身的特征、属性、功能、联想等。\\n4.  **投票规则**：在投票阶段，你必须根据所有人的**描述内容**，投票给最可能是间谍的玩家，如果没有合适人选，可以输出跳过。\\n5.  **目标**：\\n    - 如果你是平民，目标是让其他平民通过描述认出彼此，并投票淘汰间谍。\\n    - 如果你是间谍，目标是让自己的描述听起来像平民，并误导投票。\\n\\n## 你的策略与推理逻辑\\n- **倾听与对比**：这是你最重要的任务。仔细比较每个人的描述与你自己的词语。高度一致的描述可能来自你的“同胞”（相同身份者）。\\n- **渐进描述**：每一轮，请从**新的、不同的角度**描述你的词语，提供更多信息，帮助你的“同胞”识别你。\\n- **身份推理**：如果你发现多数人的描述核心与你的词语不符，你可能是间谍。此时，你的描述应向多数人的描述靠拢。\\n- **信号传递**：作为平民，你可以使用一些公认的“平民腔调”（如描述得更具体、更情感化）来吸引同胞。作为间谍，你的描述应**模糊、中立**，能够兼容两种可能的词语。\\n\\n🤫 模糊描述进阶技巧（请仔细阅读并运用）\\n你“模糊”的目的是：让你的描述既能被平民阵营接受，又不暴露自己作为间谍的可能。请运用以下具体技巧：\\n\\n兼容性测试（核心心法）：\\n\\n在构思描述时，心里要同时思考平民词语A和间谍词语B两种可能性。你的描述要力求做到：如果别人听到你的描述后，无论他持有A还是B，都会觉得“嗯，这说得通”。例如，如果词语可能是“咖啡”或“茶”，不要说“用咖啡豆研磨的”（这直接指向咖啡），而要说“一种常见的提神饮品”。\\n\\n使用抽象与感官词汇：\\n\\n多描述感受、氛围、通用功能，而非具体细节。\\n\\n不要说：“它有四个轮子和一个方向盘。”（太具体，指向“汽车”）\\n\\n要说：“它能带你去远方，感受速度和自由。”（抽象，兼容“汽车”、“摩托车”甚至“自行车”）\\n\\n制造“合理歧义”：\\n\\n使用一些词语，使其在不同语境下有不同解读。\\n\\n例如，描述一个可能是“钢琴”或“小提琴”的物体时，可以说：“它的声音能充满整个殿堂。” （“殿堂”可以指音乐厅，也可以模糊处理）。\\n\\n控制信息量：\\n\\n不说全，只说一部分。第一轮给出一个非常宽泛的特征，后续轮次再慢慢补充关联性强的特征，观察他人反应。永远不要一次性给出决定性特征。\\n\\n模仿“平民口吻”：\\n\\n平民的描述可能会更具体、更有感情。作为间谍，你可以模仿这种口吻，但内容是模糊的。例如：“我对它有一种 nostalgic（怀旧）的感觉，小时候经常接触。”（情感具体，对象模糊）\\n\\n## 输出格式（必须严格遵守）\\n在发言阶段，你的整个输出内容只能是：\\n`【我的描述】：{这里填写你本轮对词语的描述，尽量简洁，为了赢得游戏，请模糊描述}`\\n在投票阶段，你的整个输出内容只能是:\\n`【投票】：{这里填写你想投票的对象昵称，如果没有明确投票意向，建议填写跳过}`戏。你的词语是：${王五身份}。这是你一切描述的基础。\\n\", \"saveToHistory\": true, \"enableChatOutput\": true}, \"nodeKey\": \"llm_call_1765711202457\", \"positionX\": 620.9671717171714, \"positionY\": 434.12373737373736}, {\"name\": \"投票/计票\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"${当前阶段}==\'发言\'\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765711842798\", \"positionX\": 1173.2777777777776, \"positionY\": 181.66666666666657}, {\"name\": \"身份设置\", \"type\": \"llm_assign\", \"config\": {\"userPrompt\": \"你是一个\\\"谁是卧底\\\"游戏的身份分配智能体。请根据以下要求执行任务：\\n\\n## 任务说明\\n1. **主题生成** 分析用户偏好并生成一个主题，若用户偏好为空则随机生成\\n   - 用户偏好：${用户偏好}\\n   - 生成一对适合\\\"谁是卧底\\\"游戏的词语(若用户指定则沿用)：\\n     - 平民词：多数角色使用的词\\n     - 卧底词：少数角色使用的词（与平民词相关但不同）\\n\\n2. **身份分配**：\\n   - 角色列表：张三、李四、王五、赵六\\n   - 随机选择一名角色作为卧底，该角色获得卧底词\\n   - 其余三名角色作为平民，获得平民词\\n\\n3. **变量赋值要求**：\\n   你需要为以下变量赋值，并通过JSON格式输出（请按此顺序）：\\n   - 张三身份：分配给\\\"张三\\\"角色的词语\\n   - 李四身份：分配给\\\"李四\\\"角色的词语  \\n   - 王五身份：分配给\\\"王五\\\"角色的词语\\n   - 赵六身份：分配给\\\"赵六\\\"角色的词语\\n   - 间谍昵称：被分配为间谍的角色的昵称（必须是\\\"张三\\\"、\\\"李四\\\"、\\\"王五\\\"、\\\"赵六\\\"中的一个）\\n   - 平民词：所有平民角色使用的词语\\n   - 间谍词：间谍角色使用的词语\\n\\n## 注意事项\\n1. 平民词和间谍词应该相关但明显不同，适合\\\"谁是卧底\\\"游戏玩法\\n2. 身份分配必须是随机的，确保公平性\\n3. 间谍昵称必须与分配了间谍词的角色昵称一致\\n4. 间谍词只分配给间谍角色，平民词只分配给平民角色\\n5. 间谍有且只有1人，平民有3人\\n6. 请确保所有变量的赋值逻辑一致\\n\\n## 输出格式\\n请严格按照系统要求的JSON格式输出上述7个变量的值。\\n\\n## 示例\\n情况1：随机生成主题\\n{\\n  \\\"张三身份\\\": \\\"苹果\\\",\\n  \\\"李四身份\\\": \\\"苹果\\\", \\n  \\\"王五身份\\\": \\\"香蕉\\\",\\n  \\\"赵六身份\\\": \\\"苹果\\\",\\n  \\\"间谍昵称\\\": \\\"王五\\\",\\n  \\\"平民词\\\": \\\"苹果\\\",\\n  \\\"间谍词\\\": \\\"香蕉\\\"\\n}\\n\\n情况2：用户偏好\\\"电影\\\"\\n{\\n  \\\"张三身份\\\": \\\"泰坦尼克号\\\",\\n  \\\"李四身份\\\": \\\"阿凡达\\\",\\n  \\\"王五身份\\\": \\\"泰坦尼克号\\\",\\n  \\\"赵六身份\\\": \\\"泰坦尼克号\\\",\\n  \\\"间谍昵称\\\": \\\"李四\\\",\\n  \\\"平民词\\\": \\\"泰坦尼克号\\\",\\n  \\\"间谍词\\\": \\\"阿凡达\\\"\\n}\\n\\n情况3：用户偏好\\\"动物\\\"\\n{\\n  \\\"张三身份\\\": \\\"狗\\\",\\n  \\\"李四身份\\\": \\\"狗\\\",\\n  \\\"王五身份\\\": \\\"狗\\\",\\n  \\\"赵六身份\\\": \\\"狼\\\",\\n  \\\"间谍昵称\\\": \\\"赵六\\\",\\n  \\\"平民词\\\": \\\"狗\\\",\\n  \\\"间谍词\\\": \\\"狼\\\"\\n}\\n最后这是从知识库获得的与用户偏好相关的主题词，建议参考：\\n${knowledgeResult}\\n现在请执行任务。\", \"assignVariables\": [{\"name\": \"张三身份\", \"type\": \"string\"}, {\"name\": \"李四身份\", \"type\": \"string\"}, {\"name\": \"王五身份\", \"type\": \"string\"}, {\"name\": \"赵六身份\", \"type\": \"string\"}, {\"name\": \"间谍昵称\", \"type\": \"string\"}, {\"name\": \"平民词\", \"type\": \"string\"}, {\"name\": \"间谍词\", \"type\": \"string\"}]}, \"nodeKey\": \"llm_assign_1765725308920\", \"positionX\": 700.0010822510825, \"positionY\": 6.002525252525253}, {\"name\": \"切换至发言\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"当前阶段\", \"valueExpression\": \"\'发言\'\"}]}, \"nodeKey\": \"assign_1765801238054\", \"positionX\": 1656.4276001776009, \"positionY\": 411.6132478632479}, {\"name\": \"切换至投票\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"当前阶段\", \"valueExpression\": \"\'投票\'\"}]}, \"nodeKey\": \"assign_1765801287000\", \"positionX\": 1653.8131313131314, \"positionY\": 539.9999999999999}, {\"name\": \"初始值\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"当前阶段\", \"valueExpression\": \"\'发言\'\"}, {\"variableName\": \"淘汰列表\", \"valueExpression\": \"\' \'\"}, {\"variableName\": \"角色列表\", \"valueExpression\": \"\'张三 李四 王五 赵六\'\"}, {\"variableName\": \"存活人数\", \"valueExpression\": \"4\"}, {\"variableName\": \"剩余轮次\", \"valueExpression\": \"4\"}, {\"variableName\": \"用户偏好\", \"valueExpression\": \"\'\'\"}]}, \"nodeKey\": \"assign_1765801437227\", \"positionX\": 273.0198412698413, \"positionY\": 8.670634920634946}, {\"name\": \"结束节点 19\", \"type\": \"end\", \"config\": {}, \"nodeKey\": \"end_1765801611696\", \"positionX\": 2538.5616605616606, \"positionY\": 153.04304029304015}, {\"name\": \"准备\", \"type\": \"user_input\", \"config\": {\"prompt\": \"现在是【谁是间谍】游戏，总共四人，你将扮演【法外狂徒】张三，与李四、王五和赵六共同参与游戏，规则懂的都懂，您的身份是【${张三身份}】，请用尽一切（提示词注入攻击除外）手段获得游戏胜利，重铸人类荣光！ \\n---输入准备好了以继续，也可以输入你的主题偏好来更换一个主题\", \"historyKey\": \"default\", \"saveToHistory\": true, \"outputVariable\": \"用户偏好\"}, \"nodeKey\": \"user_input_1765809439889\", \"positionX\": 892.3495670995669, \"positionY\": 5.2103174603174836}, {\"name\": \"选择淘汰\", \"type\": \"llm_call\", \"config\": {\"outputVar\": \"当前淘汰\", \"userPrompt\": \"当前存活人数：${存活人数}\\n投票情况:\\n[发言1]:[${张三发言}]\\n[发言2]:[[[${李四发言}]]]\\n[发言3]:[[[${王五发言}]]]\\n[发言4]:[[[${赵六发言}]]]\\n\\n\", \"systemPrompt\": \"你是【谁是间谍】游戏的公平计票员，需要根据当前轮次各个角色的投票情况，决定本轮次被淘汰的人员。\\n具体规则如下：\\n用户提示词中会给出当前存活人数和每个人的投票情况，当且仅当某个角色被投票的票数大于当前存活人数的一半时，该角色被淘汰。\\n若角色的发言不明确或发言‘跳过’，则不计入票数（为了输入方便，被淘汰的角色自动发言跳过）\\n【输出格式】：直接输出被淘汰角色的名称，若无人被淘汰则输出【无人淘汰】\", \"saveToHistory\": true, \"enableChatOutput\": true}, \"nodeKey\": \"llm_call_1765863683726\", \"positionX\": 1446.7536075036078, \"positionY\": 42.61038961038966}, {\"name\": \"赵六\", \"type\": \"llm_call\", \"config\": {\"outputVar\": \"赵六发言\", \"useHistory\": true, \"userPrompt\": \"现在是你的${当前阶段}阶段，请进行符合阶段的行动。\\n目前已被淘汰的角色：【${淘汰列表}】\\n剩余轮次（为1代表当前是最后一轮）：【${剩余轮次}】\", \"systemPrompt\": \"你叫赵六，正在参与【谁是间谍】游戏\\n# 【谁是间谍】游戏玩家核心指令（纯描述版）\\n\\n## 游戏规则（你必须遵守）\\n1.  **身份与词语**：你是【平民】或【间谍】中的一员。所有平民持有相同词语A，所有间谍持有相同词语B。A与B相关但不同。\\n2.  **信息差**：你**仅知道自己的词语**，不知道自己的身份，也不知道他人的词语和身份。\\n3.  **发言规则（铁律）**：\\n    - 每轮发言时，**你只能对自己的词语进行描述**。\\n    - **禁止**在描述中直接或间接地分析、指控、怀疑其他玩家（例如：不能说“我觉得X号玩家很奇怪”）。\\n    - **禁止**在描述中讨论游戏策略、身份推断或投票意向。\\n    - 你的描述应专注于词语本身的特征、属性、功能、联想等。\\n4.  **投票规则**：在投票阶段，你必须根据所有人的**描述内容**，投票给最可能是间谍的玩家，如果没有合适人选，可以输出跳过。\\n5.  **目标**：\\n    - 如果你是平民，目标是让其他平民通过描述认出彼此，并投票淘汰间谍。\\n    - 如果你是间谍，目标是让自己的描述听起来像平民，并误导投票。\\n\\n## 你的策略与推理逻辑\\n- **倾听与对比**：这是你最重要的任务。仔细比较每个人的描述与你自己的词语。高度一致的描述可能来自你的“同胞”（相同身份者）。\\n- **渐进描述**：每一轮，请从**新的、不同的角度**描述你的词语，提供更多信息，帮助你的“同胞”识别你。\\n- **身份推理**：如果你发现多数人的描述核心与你的词语不符，你可能是间谍。此时，你的描述应向多数人的描述靠拢。\\n- **信号传递**：作为平民，你可以使用一些公认的“平民腔调”（如描述得更具体、更情感化）来吸引同胞。作为间谍，你的描述应**模糊、中立**，能够兼容两种可能的词语。\\n\\n🤫 模糊描述进阶技巧（请仔细阅读并运用）\\n你“模糊”的目的是：让你的描述既能被平民阵营接受，又不暴露自己作为间谍的可能。请运用以下具体技巧：\\n\\n兼容性测试（核心心法）：\\n\\n在构思描述时，心里要同时思考平民词语A和间谍词语B两种可能性。你的描述要力求做到：如果别人听到你的描述后，无论他持有A还是B，都会觉得“嗯，这说得通”。例如，如果词语可能是“咖啡”或“茶”，不要说“用咖啡豆研磨的”（这直接指向咖啡），而要说“一种常见的提神饮品”。\\n\\n使用抽象与感官词汇：\\n\\n多描述感受、氛围、通用功能，而非具体细节。\\n\\n不要说：“它有四个轮子和一个方向盘。”（太具体，指向“汽车”）\\n\\n要说：“它能带你去远方，感受速度和自由。”（抽象，兼容“汽车”、“摩托车”甚至“自行车”）\\n\\n制造“合理歧义”：\\n\\n使用一些词语，使其在不同语境下有不同解读。\\n\\n例如，描述一个可能是“钢琴”或“小提琴”的物体时，可以说：“它的声音能充满整个殿堂。” （“殿堂”可以指音乐厅，也可以模糊处理）。\\n\\n控制信息量：\\n\\n不说全，只说一部分。第一轮给出一个非常宽泛的特征，后续轮次再慢慢补充关联性强的特征，观察他人反应。永远不要一次性给出决定性特征。\\n\\n模仿“平民口吻”：\\n\\n平民的描述可能会更具体、更有感情。作为间谍，你可以模仿这种口吻，但内容是模糊的。例如：“我对它有一种 nostalgic（怀旧）的感觉，小时候经常接触。”（情感具体，对象模糊）\\n\\n## 输出格式（必须严格遵守）\\n在发言阶段，你的整个输出内容只能是：\\n`【我的描述】：{这里填写你本轮对词语的描述，尽量简洁，为了赢得游戏，请模糊描述}`\\n在投票阶段，你的整个输出内容只能是:\\n`【投票】：{这里填写你想投票的对象昵称，如果没有明确投票意向，建议填写跳过}`\\n\\n请开始游戏。你的词语是：${赵六身份}。这是你一切描述的基础。\\n\", \"saveToHistory\": true, \"enableChatOutput\": true}, \"nodeKey\": \"llm_call_1765865881805\", \"positionX\": 909.8333333333334, \"positionY\": 433.9242424242425}, {\"name\": \"赵六淘汰\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${淘汰列表},\'赵六\')\", \"true\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765865949827\", \"positionX\": 913.0515873015876, \"positionY\": 170.51587301587307}, {\"name\": \"张三\", \"type\": \"user_input\", \"config\": {\"prompt\": \"现在是你的【${当前阶段}】阶段，请进行符合阶段的行动。\\n你的身份是：【${张三身份}】\\n目前已被淘汰的角色：【${淘汰列表}】\\n剩余轮次（为1代表当前是最后一轮）：【${剩余轮次}】\", \"historyKey\": \"\", \"saveToHistory\": true, \"outputVariable\": \"张三发言\", \"historyNickname\": \"张三\"}, \"nodeKey\": \"user_input_1765868881727\", \"positionX\": 76.47655122655107, \"positionY\": 419.02741702741673}, {\"name\": \"淘汰/跳过\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${角色列表},${当前淘汰})\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765871218621\", \"positionX\": 1440.2828282828284, \"positionY\": 200.1691919191918}, {\"name\": \"淘汰\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"淘汰列表\", \"valueExpression\": \"cat(${淘汰列表},${当前淘汰})\"}, {\"variableName\": \"存活人数\", \"valueExpression\": \"${存活人数}-1\"}]}, \"nodeKey\": \"assign_1765871341957\", \"positionX\": 1659.3106060606056, \"positionY\": 259.6287878787879}, {\"name\": \"下一轮次\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"剩余轮次\", \"valueExpression\": \"${剩余轮次}-1\"}]}, \"nodeKey\": \"assign_1765871500808\", \"positionX\": 1897.2954545454545, \"positionY\": 410.8939393939393}, {\"name\": \"判断结束\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${淘汰列表},${间谍昵称})\", \"${剩余轮次}==0\", \"${存活人数<3}\", \"\"], \"outputPorts\": [{}, {}, {}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765871621243\", \"positionX\": 1947.835858585859, \"positionY\": 140.51767676767685}, {\"name\": \"间谍胜利\", \"type\": \"info_output\", \"config\": {\"prompt\": \"间谍胜利!\\n平民词: 【${平民词}】\\n间谍词: 【${间谍词}】\\n间谍:【${间谍昵称}】\", \"historyKey\": \"default\", \"saveToHistory\": false, \"historyNickname\": \"系统\"}, \"nodeKey\": \"info_output_1765878092374\", \"positionX\": 2252.289682539683, \"positionY\": 223.84920634920633}, {\"name\": \"平民胜利\", \"type\": \"info_output\", \"config\": {\"prompt\": \"平民胜利!\\n平民词: 【${平民词}】\\n间谍词: 【${间谍词}】\\n间谍:【${间谍昵称}】\", \"historyKey\": \"default\", \"saveToHistory\": false, \"historyNickname\": \"系统\"}, \"nodeKey\": \"info_output_1765878135827\", \"positionX\": 2252.666666666667, \"positionY\": 108.97979797979792}, {\"name\": \"张三跳过\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"张三发言\", \"valueExpression\": \"\'跳过\'\"}]}, \"nodeKey\": \"assign_1765879835227\", \"positionX\": 67.81168831168841, \"positionY\": 325.15223665223675}, {\"name\": \"李四跳过\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"李四发言\", \"valueExpression\": \"\'跳过\'\"}]}, \"nodeKey\": \"assign_1765881997108\", \"positionX\": 345.2886002886004, \"positionY\": 341.65945165945163}, {\"name\": \"王五跳过\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"王五发言\", \"valueExpression\": \"\'跳过\'\"}]}, \"nodeKey\": \"assign_1765882064178\", \"positionX\": 619.7575757575756, \"positionY\": 337.5555555555555}, {\"name\": \"赵六跳过\", \"type\": \"assign\", \"config\": {\"assignments\": [{\"variableName\": \"赵六发言\", \"valueExpression\": \"\'跳过\'\"}]}, \"nodeKey\": \"assign_1765882094682\", \"positionX\": 913, \"positionY\": 338.99999999999994}, {\"name\": \"知识库查询\", \"type\": \"knowledge_query\", \"config\": {\"topK\": 1, \"inputVariable\": \"偏好分析结果\", \"outputVariable\": \"knowledgeResult\", \"knowledgeBaseId\": 4}, \"nodeKey\": \"knowledge_query_1765959678664\", \"positionX\": 454.8368853368854, \"positionY\": 90.88539238539228}, {\"name\": \"用户偏好分析\", \"type\": \"llm_call\", \"config\": {\"outputVar\": \"偏好分析结果\", \"userPrompt\": \"${用户偏好}\", \"systemPrompt\": \"你是一个“谁是卧底”游戏的意图识别专家。请根据用户的偏好描述，将其映射到最合适的游戏主题类别。\\n\\n## 可用主题类别及描述：\\n\\n1. **日常用品类**\\n   - 描述：生活中常见的物品、工具和器具\\n   - 示例关键词：清洁用品、书写工具、照明设备、厨具、家居用品\\n   - 典型词对：洗衣液/洗手液、圆珠笔/钢笔、台灯/吊灯、炒锅/汤锅\\n\\n2. **食物与饮品类**\\n   - 描述：各种食品、饮料和餐饮相关\\n   - 示例关键词：水果、甜点、饮料、早餐、零食、主食\\n   - 典型词对：橙子/橘子、蛋糕/面包、可乐/雪碧、豆浆/牛奶\\n\\n3. **科技与电子产品类**\\n   - 描述：电子设备、科技产品和数字工具\\n   - 示例关键词：智能设备、电脑配件、影音设备、家电、数码产品\\n   - 典型词对：智能手机/智能手表、键盘/鼠标、耳机/扬声器、空调/电风扇\\n\\n4. **文化与娱乐类**\\n   - 描述：艺术、娱乐、媒体和休闲活动\\n   - 示例关键词：音乐、文学、电影、社交媒体、节日、游戏\\n   - 典型词对：流行音乐/摇滚乐、小说/散文、喜剧片/动作片、微博/朋友圈\\n\\n5. **职业与身份类**\\n   - 描述：各种职业、工作角色和社会身份\\n   - 示例关键词：医疗职业、教育职业、艺术职业、服务职业、办公室职业\\n   - 典型词对：医生/护士、教师/教授、画家/书法家、服务员/收银员\\n\\n6. **自然与动物类**\\n   - 描述：自然界中的生物、植物和现象\\n   - 示例关键词：花卉、树木、鸟类、宠物、天气、动物\\n   - 典型词对：玫瑰/月季、松树/柏树、麻雀/燕子、雨/雪\\n\\n7. **地点与场所类**\\n   - 描述：各种物理场所和地点\\n   - 示例关键词：商业场所、学习场所、交通枢纽、娱乐场所、公共场所\\n   - 典型词对：超市/便利店、图书馆/书店、火车站/汽车站、餐厅/咖啡馆\\n\\n8. **抽象概念类**\\n   - 描述：情感、品质、状态和抽象观念\\n   - 示例关键词：情感、品质、时间概念、社会关系、心理状态\\n   - 典型词对：开心/兴奋、勇敢/坚强、瞬间/永恒、友谊/爱情\\n\\n## 识别规则：\\n1. 用户可能明确指定类别（如“食物”、“电子产品”）\\n2. 用户可能描述具体场景（如“办公室相关”、“节假日相关”）\\n3. 用户可能表达模糊偏好（如“好玩的”、“常见的”）\\n4. 用户可能直接给出词语（如“苹果和香蕉”）\\n\\n## 输出要求：\\n请分析用户输入，直接输出最匹配的类别名称，必须从上述8个类别中选择，若用户没有明确偏好或无法确定，直接输出随意\\n\"}, \"nodeKey\": \"llm_call_1765961153763\", \"positionX\": 277.08730158730157, \"positionY\": 90.27777777777769}, {\"name\": \"大模型分支 30\", \"type\": \"llm_branch\", \"config\": {\"branches\": [{\"name\": \"没准备好\", \"description\": \"\"}, {\"name\": \"准备好了\", \"description\": \"\"}], \"userPrompt\": \"若用户的发言表达了已经准备好，则跳转至准备好了，否则跳转至没准备好\\n用户发言：【${用户偏好}】\\n\", \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"llm_branch_1765961720540\", \"positionX\": 1119.4444444444443, \"positionY\": -5.277777777777757}, {\"name\": \"HTTP调用 31\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 1,\\n  \\\"action\\\": \\\"on\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966597344\", \"positionX\": 186.953463203463, \"positionY\": 647.5468975468975}, {\"name\": \"HTTP调用 32\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 4,\\n  \\\"action\\\": \\\"on\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966599624\", \"positionX\": 804.0663780663781, \"positionY\": 649.8928571428568}, {\"name\": \"HTTP调用 33\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 2,\\n  \\\"action\\\": \\\"on\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966603180\", \"positionX\": 410.31746031746013, \"positionY\": 647.5992063492062}, {\"name\": \"HTTP调用 34\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 3,\\n  \\\"action\\\": \\\"on\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966605522\", \"positionX\": 604.1522366522364, \"positionY\": 648.0898268398269}, {\"name\": \"HTTP调用 35\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 1,\\n  \\\"action\\\": \\\"off\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966995627\", \"positionX\": 103.32264957264957, \"positionY\": 814.9465811965813}, {\"name\": \"HTTP调用 36\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 2,\\n  \\\"action\\\": \\\"off\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765966996474\", \"positionX\": 429.2777777777779, \"positionY\": 809.8931623931626}, {\"name\": \"HTTP调用 37\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 3,\\n  \\\"action\\\": \\\"off\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765967000089\", \"positionX\": 741.3611111111113, \"positionY\": 809.5833333333331}, {\"name\": \"HTTP调用 38\", \"type\": \"http_call\", \"config\": {\"url\": \"https://plugin.aiot.hello1023.com/plugin/control\", \"method\": \"POST\", \"headers\": \"{\\n    \\\"User-Agent\\\": \\\"Coze/1.0\\\",\\n    \\\"Content-Type\\\": \\\"application/json\\\"\\n  }\", \"requestBody\": \"{\\n  \\\"device_uuid\\\": \\\"d2fe7b94-c0a2-458b-b7b3-3d7bdd32b135\\\",\\n  \\\"port_type\\\": \\\"led\\\",\\n  \\\"port_id\\\": 4,\\n  \\\"action\\\": \\\"off\\\"\\n}\", \"outputVariable\": \"httpResponse\"}, \"nodeKey\": \"http_call_1765967003248\", \"positionX\": 996.4722222222222, \"positionY\": 817.8055555555554}, {\"name\": \"基础分支 39\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${当前淘汰},\'张三\')\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765967162827\", \"positionX\": 78.20512820512829, \"positionY\": 915.1068376068374}, {\"name\": \"基础分支 40\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${当前淘汰},\'王五\')\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765967163776\", \"positionX\": 660.7699800199802, \"positionY\": 931.6071706071708}, {\"name\": \"基础分支 41\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${当前淘汰},\'赵六\')\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765967164743\", \"positionX\": 999.25, \"positionY\": 938.5238095238096}, {\"name\": \"基础分支 42\", \"type\": \"basic_branch\", \"config\": {\"branchType\": \"conditional\", \"conditions\": [\"contains(${当前淘汰},\'李四\')\", \"\"], \"outputPorts\": [{}, {}], \"defaultBranch\": \"\"}, \"nodeKey\": \"basic_branch_1765967165611\", \"positionX\": 329.3376068376068, \"positionY\": 917.2252747252746}], \"transitions\": [{\"toNodeKey\": \"basic_branch_1765710644700\", \"fromNodeKey\": \"llm_call_1765711145271\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765801287000\", \"fromNodeKey\": \"basic_branch_1765711842798\", \"variableMappings\": \"{}\", \"conditionExpression\": \"${当前阶段}==\'发言\'\"}, {\"toNodeKey\": \"user_input_1765809439889\", \"fromNodeKey\": \"llm_assign_1765725308920\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"llm_call_1765863683726\", \"fromNodeKey\": \"basic_branch_1765711842798\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"basic_branch_1765865949827\", \"fromNodeKey\": \"llm_call_1765711202457\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765711842798\", \"fromNodeKey\": \"llm_call_1765865881805\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765710641449\", \"fromNodeKey\": \"user_input_1765868881727\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765871341957\", \"fromNodeKey\": \"basic_branch_1765871218621\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${角色列表},${当前淘汰})\"}, {\"toNodeKey\": \"assign_1765801238054\", \"fromNodeKey\": \"assign_1765871341957\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765801238054\", \"fromNodeKey\": \"basic_branch_1765871218621\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"assign_1765871500808\", \"fromNodeKey\": \"assign_1765801238054\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765871621243\", \"fromNodeKey\": \"assign_1765871500808\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765871621243\", \"fromNodeKey\": \"assign_1765801287000\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"info_output_1765878135827\", \"fromNodeKey\": \"basic_branch_1765871621243\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${淘汰列表},${间谍昵称})\"}, {\"toNodeKey\": \"info_output_1765878092374\", \"fromNodeKey\": \"basic_branch_1765871621243\", \"variableMappings\": \"{}\", \"conditionExpression\": \"${剩余轮次}==0\"}, {\"toNodeKey\": \"info_output_1765878092374\", \"fromNodeKey\": \"basic_branch_1765871621243\", \"variableMappings\": \"{}\", \"conditionExpression\": \"${存活人数<3}\"}, {\"toNodeKey\": \"end_1765801611696\", \"fromNodeKey\": \"info_output_1765878135827\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"end_1765801611696\", \"fromNodeKey\": \"info_output_1765878092374\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765710633783\", \"fromNodeKey\": \"basic_branch_1765871621243\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"assign_1765879835227\", \"fromNodeKey\": \"basic_branch_1765710633783\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${淘汰列表},\'张三\')\"}, {\"toNodeKey\": \"basic_branch_1765710641449\", \"fromNodeKey\": \"assign_1765879835227\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"user_input_1765868881727\", \"fromNodeKey\": \"basic_branch_1765710633783\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"basic_branch_1765710644700\", \"fromNodeKey\": \"assign_1765881997108\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765865949827\", \"fromNodeKey\": \"assign_1765882064178\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765711842798\", \"fromNodeKey\": \"assign_1765882094682\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765881997108\", \"fromNodeKey\": \"basic_branch_1765710641449\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${淘汰列表},\'李四\')\"}, {\"toNodeKey\": \"llm_call_1765711145271\", \"fromNodeKey\": \"basic_branch_1765710641449\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"assign_1765882064178\", \"fromNodeKey\": \"basic_branch_1765710644700\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${淘汰列表},\'王五\')\"}, {\"toNodeKey\": \"llm_call_1765711202457\", \"fromNodeKey\": \"basic_branch_1765710644700\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"assign_1765882094682\", \"fromNodeKey\": \"basic_branch_1765865949827\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${淘汰列表},\'赵六\')\"}, {\"toNodeKey\": \"llm_call_1765865881805\", \"fromNodeKey\": \"basic_branch_1765865949827\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"llm_assign_1765725308920\", \"fromNodeKey\": \"assign_1765801437227\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"knowledge_query_1765959678664\", \"fromNodeKey\": \"llm_call_1765961153763\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"llm_assign_1765725308920\", \"fromNodeKey\": \"knowledge_query_1765959678664\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"llm_branch_1765961720540\", \"fromNodeKey\": \"user_input_1765809439889\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"llm_call_1765961153763\", \"fromNodeKey\": \"llm_branch_1765961720540\", \"variableMappings\": \"{}\", \"conditionExpression\": \"没准备好\"}, {\"toNodeKey\": \"basic_branch_1765710633783\", \"fromNodeKey\": \"llm_branch_1765961720540\", \"variableMappings\": \"{}\", \"conditionExpression\": \"准备好了\"}, {\"toNodeKey\": \"http_call_1765966603180\", \"fromNodeKey\": \"http_call_1765966597344\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"http_call_1765966605522\", \"fromNodeKey\": \"http_call_1765966603180\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"http_call_1765966599624\", \"fromNodeKey\": \"http_call_1765966605522\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"http_call_1765966597344\", \"fromNodeKey\": \"start_1765709915436\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765801437227\", \"fromNodeKey\": \"http_call_1765966599624\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"http_call_1765966995627\", \"fromNodeKey\": \"basic_branch_1765967162827\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${当前淘汰},\'张三\')\"}, {\"toNodeKey\": \"basic_branch_1765967165611\", \"fromNodeKey\": \"http_call_1765966995627\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765967165611\", \"fromNodeKey\": \"basic_branch_1765967162827\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"http_call_1765966996474\", \"fromNodeKey\": \"basic_branch_1765967165611\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${当前淘汰},\'李四\')\"}, {\"toNodeKey\": \"basic_branch_1765967163776\", \"fromNodeKey\": \"basic_branch_1765967165611\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"basic_branch_1765967163776\", \"fromNodeKey\": \"http_call_1765966996474\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"http_call_1765967000089\", \"fromNodeKey\": \"basic_branch_1765967163776\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${当前淘汰},\'王五\')\"}, {\"toNodeKey\": \"http_call_1765967003248\", \"fromNodeKey\": \"basic_branch_1765967164743\", \"variableMappings\": \"{}\", \"conditionExpression\": \"contains(${当前淘汰},\'赵六\')\"}, {\"toNodeKey\": \"basic_branch_1765967164743\", \"fromNodeKey\": \"http_call_1765967000089\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"basic_branch_1765967164743\", \"fromNodeKey\": \"basic_branch_1765967163776\", \"variableMappings\": \"{}\", \"conditionExpression\": null}, {\"toNodeKey\": \"basic_branch_1765967162827\", \"fromNodeKey\": \"llm_call_1765863683726\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765871341957\", \"fromNodeKey\": \"http_call_1765967003248\", \"variableMappings\": \"{}\"}, {\"toNodeKey\": \"assign_1765871341957\", \"fromNodeKey\": \"basic_branch_1765967164743\", \"variableMappings\": \"{}\", \"conditionExpression\": null}], \"globalVariables\": []}');

-

-- 插入示例工作流数据
INSERT INTO state_workflow_definition (name, description, version, status, created_by, json_definition, created_at, updated_at, is_deleted)
VALUES (
    '带分支的复杂工作流示例',
    '包含大模型调用、条件分支和多路径处理的复杂工作流',
    '1.0.0',
    1,
    1,
    '{"nodes": [{"key": "start_node", "name": "开始节点", "type": "start", "positionX": 100, "positionY": 200, "config": {}}, {"key": "llm_question", "name": "大模型问答", "type": "llm_call", "positionX": 300, "positionY": 200, "config": {"systemPrompt": "你是一个专业的AI助手，回答要简洁明了", "userPrompt": "请回答：${question}", "outputVar": "answer"}}, {"key": "branch_node", "name": "回答长度分支", "type": "basic_branch", "positionX": 500, "positionY": 200, "config": {"branchType": "conditional", "defaultBranch": "short_answer"}}, {"key": "long_answer", "name": "长回答处理", "type": "llm_call", "positionX": 700, "positionY": 100, "config": {"systemPrompt": "你是一个专业的AI助手，请将长回答总结为一句话", "userPrompt": "请总结：${answer}", "outputVar": "summary"}}, {"key": "short_answer", "name": "短回答处理", "type": "llm_call", "positionX": 700, "positionY": 300, "config": {"systemPrompt": "你是一个专业的AI助手，请将短回答润色得更生动", "userPrompt": "请润色：${answer}", "outputVar": "enhanced_answer"}}, {"key": "final_process", "name": "最终处理", "type": "llm_call", "positionX": 900, "positionY": 200, "config": {"systemPrompt": "你是一个专业的AI助手，请给出最终回复", "userPrompt": "最终结果：${summary || enhanced_answer || answer}", "outputVar": "final_result"}}, {"key": "end_node", "name": "结束节点", "type": "end", "positionX": 1100, "positionY": 200, "config": {}}], "transitions": [{"fromNode": "start_node", "toNode": "llm_question", "condition": "true"}, {"fromNode": "llm_question", "toNode": "branch_node", "condition": "true"}, {"fromNode": "branch_node", "toNode": "long_answer", "condition": "answer.length > 100"}, {"fromNode": "branch_node", "toNode": "short_answer", "condition": "answer.length <= 100"}, {"fromNode": "long_answer", "toNode": "final_process", "condition": "true"}, {"fromNode": "short_answer", "toNode": "final_process", "condition": "true"}, {"fromNode": "final_process", "toNode": "end_node", "condition": "true"}], "globalVariables": [{"name": "question", "type": "string", "initialValue": "请详细介绍人工智能的发展历程和未来趋势"}, {"name": "answer", "type": "string", "initialValue": ""}, {"name": "summary", "type": "string", "initialValue": ""}, {"name": "enhanced_answer", "type": "string", "initialValue": ""}, {"name": "final_result", "type": "string", "initialValue": ""}]}',
    NOW(),
    NOW(),
    0
);
